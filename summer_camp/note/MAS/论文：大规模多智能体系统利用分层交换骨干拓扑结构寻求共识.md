# 论文：大规模多智能体系统利用分层交换骨干拓扑结构寻求共识

## 一、 摘要

**提出问题**

现有的网络拓扑结构假设收敛演化通常在一个智能体被平等对待并与感知到的邻居直接交流的结构中，但未能探索网络拓扑结构的层次性

现有的研究是基于固定的拓扑结构，但现实生活中MAS是会受到一些如有限的传感、计算、存储、运行能力的限制，很难保持全局连接性并达成全局共识

**解决方法**

提出完全去中心化的框架，即层次化的交换骨干多智能体系统（HSBMAS）的框架，用于在无定向和时间变化的拓扑结构下寻求共识

首先，提取提供原始多智能体系统分层组织的骨干网络拓扑结构；

其次，通过定期提取切换骨干网络的拓扑结构，设计一个新的共识框架使智能体收敛到一个共同的稳定均衡，并具有连通性约束。

## 二、 基础知识

#### 2.1 网络假设和记号

$$
(3):N_i^2(k)=\{m:||q_m(k)-q_n(k)||\leqslant r_c \and n\in N_i^1(k)\}-N_i^1(k)
$$

#### 2.2 分布式离散时间共识算法

$$
(6):q_i(k+1)=q_i(k)+u_i(k)
$$

$$
(7):u_i(k)=\epsilon\sum_{j\in N_i^1(k)}a_{ij}(k)·(q_j(k)-q_i(k))
$$

其中，$\epsilon$是影响拓扑结构的收敛

**离散时间动态**
$$
(8):q_i(k+1)=(1-\lambda_i(k))·q_i(k)+\lambda_i(k)·CWP_i(k)
$$
其中，$\lambda_i(k)\in[0,1]$是$q_i(k)$和$CWP_i(k)$的凸组合，$CWP_i(k)$是由智能体i与其邻居的信息决定的目标状态

#### 2.3 骨干网络背景

骨干网络为原网络提供了一个层次化的组织，由一个相对较小的子集和小的子集，即最小支配集(MDS)和连接支配集(CDS)
$$
DS\subseteq V,\forall u\in V-DS,\exists v\in DS,s.t.(u,v)\in E
$$
MDS的元素代表簇头，每个簇头与其邻居形成一个集群

在CDS中，有四种类型的智能体，簇头(CH)、门路(DW)、网关(GW)和非骨干(NB)。我们把簇头、门路、网关统称为骨干智能体，共同构成骨干网络，所有其他智能体为非骨干网（NB）智能体

![image-20220810160710914](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220810160710914.png)

#### 2.4 几何概念中的约束集合

$\overline B(C_{ij},\frac{r_c}{2})$表示以$C_{ij}$为圆心，$\frac{r_c}{2}$为半径的圆盘，是智能体的演化移动范围

为使系统的拓扑结构可以被控制，以保持在任何时候都能保持连接，定义最小可移动圆为约束集CS：
$$
CS_i(k)=\bigcap_{j\in N_i^1(k)}\overline B(\frac{q_i(k)+q_j(k)}{2},\frac{r_c}{2})\cap\overline B(q_i(k),r_m)
$$
其中，$r_m\ll r_c$表示智能体的最大移动范围

但如果智能体有太多的邻居，约束集的范围会很小，甚至是一个空集，这会导致系统缓慢收敛，因此我们表明邻居的数量可以根据骨干通信拓扑结构而减少

## 三、算法

![image-20220810214131561](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220810214131561.png)

![image-20220811014613242](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811014613242.png)

TMPO算法的关键修改：

- 改变智能体优先级的定义
- 改为离散时间系统的同步执行模式
- 构建主干网络的动态切换
- 引入约束集的几何方法来保持骨干网络的连接性

#### 3.1 拓扑控制阶段

##### 3.1.1 智能体的优先级

拥有更多和更近的邻居的智能体将拥有更高的优先级

优先级公式：
$$
(13a):P_i(k)=B_i^1(k)\oplus B_i^2
$$
异或运算，相同为0，不同为1
$$
(13b):B_i(k)=\frac{\bigcap_{j\in N_i^1(k)}S(q_j(k),\frac{r_c}{2})\cap S(q_i(k),r_c)}{S(q_i(k),r_c)}
$$

$$
(13c):B_i^2=Hash(i)
$$

其中，$B_i^1(k),B_i^2(k)$是位串，$\oplus$是位连接操作，函数$Hash(i)$是一个伪随机数发生器，根据输入的智能体标识符在$[0,1]$上产生一个均匀分布的随机数。此外，$S(x,y)$是以x位中心，半径为y的圆的面积

$B_i^1(k)$是圆盘$S(q_j(k),\frac{r_c}{2})$与圆盘$S(q_i(k),r_c)$的一阶邻居，随后$B_i^1(k)$表示邻居占据的密度，并被归一化为$[0,1]$，也就是说，拥有更多更近的邻居的智能体将拥有更高的优先级

![](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811002136385.png)

**邻居信息初始化：**

![image-20220811004520054](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811004520054.png)

##### 3.1.2 MDS和CDS的挑选

**成为簇头的条件**（只要满足其一）：

- 在一阶邻居中有最高的优先级
- 在二阶邻居中有最高的优先级

算法：

![image-20220811013805751](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811013805751.png)

**挑选门路的核心思想：**使用标准筛出不合格的簇头对

筛选标准：

- 簇头$c_1,c_2$之间没有其他最短路径，且有智能体m
- 簇头$c_1,c_2$之间没有任何簇头m或n
- 簇头$c_1,c_2$之间没有其他具有优先级更高的智能体m或n的三阶路径

不符合的例子：

![image-20220811133039064](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811133039064.png)

算法：

![image-20220811133917405](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811133917405.png)

**挑选网关：**

- 如果簇头$c_1,c_2$之间有别的簇头，则智能体i不能成为网关
- 如果簇头$c_1,c_2$之间有别的比智能体i具有更高优先级的智能体n，智能体i不能成为网关

不符合的例子：

![image-20220811133816845](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811133816845.png)

算法：

![image-20220811031144241](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811031144241.png)

##### 3.1.3 形成骨干连接：

- 非骨干智能体根据其数据类型ch挑选自己的簇头作为邻居
- 簇头智能体挑选一阶簇头智能体作为邻居
- 门路和网关智能体挑选其相应数据类型的一阶智能体作为邻居

连接修建算法进一步减少冗余的连接：

- 修建簇头之间的连接，如果三个簇头在彼此的交互范围内并且形成一个三角形，两个簇头之间的连接优先级较低的连接将被删除
- 修建门路和簇头之间的连接，如果一个门路和两个相连的簇头相连，优先级较低的簇头将被断开与门路的连接
- 修建网关和簇头之间的连接，如果有两个以上的簇头连接到一个网关，并且这些簇头的连接分量是大于1，那么网关将连接到的在每个连接的簇头组中具有最高优先级的簇头

对应例子：

![image-20220811141943037](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811141943037.png)

算法：

![image-20220811031230801](http://qioqio.oss-cn-guangzhou.aliyuncs.com/img/image-20220811031230801.png)

#### 3.2 收敛演变阶段

##### 3.2.1  计算候选途径点（CWP）

$$
(14):CWP_i^m(K)=\frac{max_{s\in \widehat N_i^1(k)\cup\{i\}}q_s^m(k)+min_{t\in \widehat N_i^1(k)\cup\{i\}}q_t^m(k)}{2}
$$

##### 3.2.2 计算约束集

$$
(15):\widehat {CS}_i(k)=\bigcap_{j\in \widehat N_i^1(k)}\overline B(\frac{q_i(k)+q_j(k)}{2},\frac{r_c}{2})\cap\overline B(q_i(k),r_m)
$$

##### 3.2.3 智能体的演变



